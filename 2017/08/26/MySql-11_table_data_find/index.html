<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="不知道描述啥"><title>MySql_11 表中数据的查询 | Sing</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MySql_11 表中数据的查询</h1><a id="logo" href="/.">Sing</a><p class="description">笔记</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa undefined"> 首页</i></a><a href="/django"><i class="fa undefined"> Django</i></a><a href="/html_css"><i class="fa undefined"> Html_css</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">MySql_11 表中数据的查询</h1><div class="post-meta">Aug 26, 2017<span> | </span><span class="category"><a href="/categories/MySql/">MySql</a></span></div><div class="post-content"><h2 id="首先我们准备一点数据"><a href="#首先我们准备一点数据" class="headerlink" title="首先我们准备一点数据"></a>首先我们准备一点数据</h2><h5 id="1、创建数据库cms"><a href="#1、创建数据库cms" class="headerlink" title="1、创建数据库cms"></a>1、创建数据库<code>cms</code></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> cms <span class="keyword">DEFAULT</span> <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br></pre></td></tr></table></figure>
<h5 id="2、创建管理员表cms-admin并插入几条数据"><a href="#2、创建管理员表cms-admin并插入几条数据" class="headerlink" title="2、创建管理员表cms_admin并插入几条数据"></a>2、创建管理员表<code>cms_admin</code>并插入几条数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cms_admin(</span><br><span class="line"><span class="keyword">id</span> TINYINT <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"><span class="keyword">password</span> <span class="built_in">CHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'admin@qq.com'</span>,</span><br><span class="line"><span class="keyword">role</span> ENUM(<span class="string">'普通管理员'</span>,<span class="string">'超级管理员'</span>) <span class="keyword">DEFAULT</span> <span class="string">'普通管理员'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> cms_admin(username,<span class="keyword">password</span>,email,<span class="keyword">role</span>) <span class="keyword">VALUES</span>(<span class="string">'admin'</span>,<span class="string">'admin'</span>,<span class="string">'admin@qq.com'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> cms_admin(username,<span class="keyword">password</span>) <span class="keyword">VALUES</span>(<span class="string">'sing'</span>,<span class="string">'sing'</span>),</span><br><span class="line">(<span class="string">'queen'</span>,<span class="string">'queen'</span>),</span><br><span class="line">(<span class="string">'test'</span>,<span class="string">'test'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="3、创建分类表cms-cate并插入数据"><a href="#3、创建分类表cms-cate并插入数据" class="headerlink" title="3、创建分类表cms_cate并插入数据"></a>3、创建分类表<code>cms_cate</code>并插入数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cms_cate(</span><br><span class="line"><span class="keyword">id</span> TINYINT <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">cateName <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">cateDesc <span class="built_in">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">''</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> cms_cate(cateName,cateDesc) <span class="keyword">VALUES</span>(<span class="string">'国内新闻'</span>,<span class="string">'聚焦当今最热的国内新闻'</span>),</span><br><span class="line">(<span class="string">'国际新闻'</span>,<span class="string">'聚焦当今最热的国际新闻'</span>),</span><br><span class="line">(<span class="string">'体育新闻'</span>,<span class="string">'聚焦当今最热的体育新闻'</span>),</span><br><span class="line">(<span class="string">'军事新闻'</span>,<span class="string">'聚焦当今最热的军事新闻'</span>),</span><br><span class="line">(<span class="string">'教育新闻'</span>,<span class="string">'聚焦当今最热的教育新闻'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="4、创建新闻表cms-news并插入数据"><a href="#4、创建新闻表cms-news并插入数据" class="headerlink" title="4、创建新闻表cms_news并插入数据"></a>4、创建新闻表<code>cms_news</code>并插入数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cms_news(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">title <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"><span class="keyword">content</span> <span class="built_in">TEXT</span>,</span><br><span class="line">clickNum <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>,</span><br><span class="line">pubTime <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span>,</span><br><span class="line">cId TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'新闻所属分类，对应分类表中的id'</span>,</span><br><span class="line">aId TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'哪个管理员发布的，对应管理员表中的id'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> cms_news(title,<span class="keyword">content</span>,pubTime,cId,aId) <span class="keyword">VALUES</span>(<span class="string">'亚航客机失联搜救尚无线索 未发求救信号'</span>,<span class="string">'马来西亚亚洲航空公司一架搭载155名乘客的客机28日早晨从印度尼西亚飞往新加坡途中与空中交通控制塔台失去联系，下落不明。'</span>,<span class="number">1419818808</span>,<span class="number">1</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'北京新开通四条地铁线路 迎接首位客人'</span>,<span class="string">'12月28日凌晨，随着北京地铁6号线二期、7号线、15号线西段、14号线东段的开通试运营，北京的轨道交通运营里程将再添62公里，共计达到527公里。当日凌晨5时许，北京地铁7号线瓷器口换乘站迎来新线开通的第一位乘客。'</span>,<span class="number">1419818108</span>,<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">'考研政治题多次出现习近平讲话内容'</span>,<span class="string">'新京报讯 （记者许路阳 (微博)）APEC反腐宣言、国家公祭日、依法治国……昨日，全国硕士研究生招生考试进行首日初试，其中，思想政治理论考题多次提及时事热点，并且多次出现习近平在不同场合的讲话内容。'</span>,<span class="number">1419818208</span>,<span class="number">3</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'深度-曾雪麟：佩兰别重蹈卡马乔覆辙'</span>,<span class="string">'12月25日是前国足主帅曾雪麟的85岁大寿，恰逢圣诞节，患有尿毒症老爷子带着圣诞帽度过了自己的生日。此前，腾讯记者曾专访曾雪麟，尽管已经退休多年，但老爷子仍旧关心着中国足球，为国足揪心，对于国足近几位的教练，他只欣赏高洪波。对即将征战亚洲杯的国足，老爷子希望佩兰不要重蹈卡马乔的覆辙'</span>,<span class="number">1419818308</span>,<span class="number">2</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="string">'国产JAD-1手枪枪架投入使用 手枪可变"冲锋枪"'</span>,<span class="string">'日前，JAD-1型多功能手枪枪架通过公安部特种警用装备质量监督检验中心检验，正式投入生产使用。此款多功能枪架由京安盾(北京)警用装备有限公司开发研制，期间经广东省江门市公安特警支队试用，获得好评。'</span>,<span class="number">1419818408</span>,<span class="number">4</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="string">'测试数据1'</span>,<span class="string">'测试数据1'</span>,<span class="number">1419818508</span>,<span class="number">1</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="string">'测试数据2'</span>,<span class="string">'测试数据2'</span>,<span class="number">1419818608</span>,<span class="number">1</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="string">'测试数据3'</span>,<span class="string">'测试数据3'</span>,<span class="number">1419818708</span>,<span class="number">1</span>,<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<h5 id="5、创建省份表provinces并插入数据"><a href="#5、创建省份表provinces并插入数据" class="headerlink" title="5、创建省份表provinces并插入数据"></a>5、创建省份表<code>provinces</code>并插入数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> provinces(</span><br><span class="line"><span class="keyword">id</span> TINYINT <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">proName <span class="built_in">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> provinces(proName) <span class="keyword">VALUES</span>(<span class="string">'北京'</span>),</span><br><span class="line">(<span class="string">'上海'</span>),</span><br><span class="line">(<span class="string">'深圳'</span>),</span><br><span class="line">(<span class="string">'广州'</span>),</span><br><span class="line">(<span class="string">'重庆'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="6、创建用户表cms-user并插入数据"><a href="#6、创建用户表cms-user并插入数据" class="headerlink" title="6、创建用户表cms_user并插入数据"></a>6、创建用户表<code>cms_user</code>并插入数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cms_user(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT <span class="keyword">KEY</span>,</span><br><span class="line">username <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line"><span class="keyword">password</span> <span class="built_in">CHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">email <span class="built_in">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'user@qq.com'</span>,</span><br><span class="line">regTime <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">face <span class="built_in">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">'user.jpg'</span>,</span><br><span class="line">proId TINYINT <span class="keyword">UNSIGNED</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户所属省份'</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> cms_user(username,<span class="keyword">password</span>,regTime,proId)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">'张三'</span>,<span class="string">'zhangsan'</span>,<span class="number">1419811708</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">'张三丰'</span>,<span class="string">'zhangsanfeng'</span>,<span class="number">1419812708</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'章子怡'</span>,<span class="string">'zhangsan'</span>,<span class="number">1419813708</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">'long'</span>,<span class="string">'long'</span>,<span class="number">1419814708</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="string">'ring'</span>,<span class="string">'ring'</span>,<span class="number">1419815708</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'queen'</span>,<span class="string">'queen'</span>,<span class="number">1419861708</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="string">'sing'</span>,<span class="string">'sing'</span>,<span class="number">1419817708</span>,<span class="number">5</span>),</span><br><span class="line">(<span class="string">'blek'</span>,<span class="string">'blek'</span>,<span class="number">1419818708</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="string">'rose'</span>,<span class="string">'rose'</span>,<span class="number">1419821708</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'lily'</span>,<span class="string">'lily'</span>,<span class="number">1419831708</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="string">'john'</span>,<span class="string">'john'</span>,<span class="number">1419841708</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<h2 id="数据准备结束"><a href="#数据准备结束" class="headerlink" title="数据准备结束"></a>数据准备结束</h2><h3 id="1、查询记录"><a href="#1、查询记录" class="headerlink" title="1、查询记录"></a>1、查询记录</h3><p>单标查询的完整语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> select_expr [, select_expr ...] </span><br><span class="line">  [</span><br><span class="line">    <span class="keyword">FROM</span> table_references </span><br><span class="line">    [<span class="keyword">WHERE</span> 条件]</span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;col_name | <span class="keyword">position</span>&#125;  [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>], ... 分组]</span><br><span class="line">    [<span class="keyword">HAVING</span> 条件 对分组结果进行二次筛选]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;col_name | <span class="keyword">position</span>&#125; [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>], ...排序]</span><br><span class="line">    [<span class="keyword">LIMIT</span> 限制显示条数]</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>
<h3 id="2、查询表达式"><a href="#2、查询表达式" class="headerlink" title="2、查询表达式"></a>2、查询表达式</h3><ul>
<li>每一个表达式表示想要的一列，必须至少有一列，多个列之间以逗号分隔</li>
<li><code>*</code>表示所有列,<code>tbl_name.*</code>可以表示命名表的所有列</li>
<li>查询表达式可以使用<code>[AS]alias_name</code>为其赋予别名</li>
</ul>
<p>比如我们只查询<code>cms_admin</code>表中的<code>id</code>和<code>username</code>:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  SELECT id,username FROM cms_admin;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | username |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | admin    | </span><br><span class="line">|  3 | queen    |</span><br><span class="line">|  2 | sing     |</span><br><span class="line">|  4 | test     |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>测试给表名起别名，一般为表名缩写，建议不超过2个字母：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id,username FROM cms_admin AS a;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | username |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | admin    |</span><br><span class="line">|  3 | queen    |</span><br><span class="line">|  2 | sing     |</span><br><span class="line">|  4 | test     |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>此时我们的表名+字段名的写法就可以用别名来写：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cms_admin.id, cms_admin.username <span class="keyword">FROM</span> cms_admin;</span><br><span class="line">&lt; == &gt;</span><br><span class="line"><span class="keyword">SELECT</span> a.id,a.username <span class="keyword">FROM</span> cms_admin <span class="keyword">AS</span> a;</span><br></pre></td></tr></table></figure>
<p>测试给字段起别名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id AS '编号',username AS '用户名',email AS '邮箱',role '角色' FROM cms_admin;</span><br><span class="line">+<span class="comment">--------+-----------+--------------+-----------------+</span></span><br><span class="line">| 编号   | 用户名    | 邮箱         | 角色            |</span><br><span class="line">+<span class="comment">--------+-----------+--------------+-----------------+</span></span><br><span class="line">|      1 | admin     | admin@qq.com | 超级管理员      |</span><br><span class="line">|      2 | sing      | admin@qq.com | 普通管理员      |</span><br><span class="line">|      3 | queen     | admin@qq.com | 普通管理员      |</span><br><span class="line">|      4 | test      | admin@qq.com | 普通管理员      |</span><br><span class="line">+<span class="comment">--------+-----------+--------------+-----------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="3-WHERE-条件"><a href="#3-WHERE-条件" class="headerlink" title="3.WHERE 条件"></a>3.WHERE 条件</h3><table>
<thead>
<tr>
<th>查询条件</th>
<th>符号  </th>
</tr>
</thead>
<tbody>
<tr>
<td>比较</td>
<td>+、&lt;、&lt;=、&gt;、&gt;=、!=、&lt;&gt;、!&gt;、!&lt;、&lt;=&gt;</td>
</tr>
<tr>
<td>指定范围</td>
<td>BETWEEN AND、NOT BETWEEN AND</td>
</tr>
<tr>
<td>指定集合</td>
<td>IN、NOT IN</td>
</tr>
<tr>
<td>匹配字符</td>
<td>LIKE、NOT LIKE</td>
</tr>
<tr>
<td>是否为控制</td>
<td>IS NULL、IS NOT NULL</td>
</tr>
<tr>
<td>多个查询条件</td>
<td>AND、OR</td>
</tr>
</tbody>
</table>
<p>然后我们单个测试一下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; # 查询编号为1的用户</span><br><span class="line">mysql&gt; SELECT id,username,email FROM cms_user WHERE id=1;</span><br><span class="line">+<span class="comment">----+----------+-------------+</span></span><br><span class="line">| id | username | email       |</span><br><span class="line">+<span class="comment">----+----------+-------------+</span></span><br><span class="line">|  1 | 张三     | user@qq.com |</span><br><span class="line">+<span class="comment">----+----------+-------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.10</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; # 查询编号大于等于<span class="number">5</span>的用户</span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">5</span>;</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+</span></span><br><span class="line">| id | username | password | email       | regTime    | face     | proId |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+</span></span><br><span class="line">|  5 | ring     | ring     | user@qq.com | 1419815708 | user.jpg |     2 |</span><br><span class="line">|  6 | queen    | queen    | user@qq.com | 1419861708 | user.jpg |     3 |</span><br><span class="line">|  7 | sing     | sing     | user@qq.com | 1419817708 | user.jpg |     5 |</span><br><span class="line">|  8 | blek     | blek     | user@qq.com | 1419818708 | user.jpg |     1 |</span><br><span class="line">|  9 | rose     | rose     | user@qq.com | 1419821708 | user.jpg |     2 |</span><br><span class="line">| 10 | lily     | lily     | user@qq.com | 1419831708 | user.jpg |     2 |</span><br><span class="line">| 11 | john     | john     | user@qq.com | 1419841708 | user.jpg |     2 |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+</span></span><br><span class="line">7 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; # 查询编号不等于<span class="number">1</span></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span>  * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> <span class="keyword">id</span>!=<span class="number">1</span>;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |</span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |</span><br><span class="line">|  9 | rose      | rose         | user@qq.com | 1419821708 | user.jpg |     2 |</span><br><span class="line">| 10 | lily      | lily         | user@qq.com | 1419831708 | user.jpg |     2 |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; # 同样的查询编号不等于<span class="number">1</span></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span>  * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> <span class="keyword">id</span>&lt;&gt;<span class="number">1</span>;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |</span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |</span><br><span class="line">|  9 | rose      | rose         | user@qq.com | 1419821708 | user.jpg |     2 |</span><br><span class="line">| 10 | lily      | lily         | user@qq.com | 1419831708 | user.jpg |     2 |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p><code>&lt;=&gt;</code>与<code>=</code>是同样的意思，但是<code>&lt;=&gt;</code>可以检测值为<code>NULL</code>的字段，我们先加入一个可以为空的<code>age</code>字段，然后插入一条数据，分别用两种方式查询一下：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE cms_user ADD age TINYINT UNSIGNED DEFAULT 18;</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT cms_user(username,password,regTime,proId,age)</span><br><span class="line">    -&gt; VALUES('test1','test1',1419811708,1,NULL);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM cms_user WHERE age=NULL;</span><br><span class="line">Empty <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> age&lt;=&gt;<span class="literal">NULL</span>;</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username | password | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| 12 | test1    | test1    | user@qq.com | 1419811708 | user.jpg |     1 | NULL |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>我们还有另一种方式来检测是否为空：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> age <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>
<p>如果我们查询编号在<code>3</code>~<code>10</code>之间的学员可以这样使用：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user WHERE id BETWEEN 3 AND 10;</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username  | password | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  3 | 章子怡    | zhangsan | user@qq.com | 1419813708 | user.jpg |     3 |   18 |</span><br><span class="line">|  4 | long      | long     | user@qq.com | 1419814708 | user.jpg |     4 |   18 |</span><br><span class="line">|  5 | ring      | ring     | user@qq.com | 1419815708 | user.jpg |     2 |   18 |</span><br><span class="line">|  6 | queen     | queen    | user@qq.com | 1419861708 | user.jpg |     3 |   18 |</span><br><span class="line">|  7 | sing      | sing     | user@qq.com | 1419817708 | user.jpg |     5 |   18 |</span><br><span class="line">|  8 | blek      | blek     | user@qq.com | 1419818708 | user.jpg |     1 |   18 |</span><br><span class="line">|  9 | rose      | rose     | user@qq.com | 1419821708 | user.jpg |     2 |   18 |</span><br><span class="line">| 10 | lily      | lily     | user@qq.com | 1419831708 | user.jpg |     2 |   18 |</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">8 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>相反的如果想查出不在<code>3</code>~<code>10</code>之间的数据可以这样写：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> cms_user <span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">3</span> <span class="keyword">AND</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>查询指定数据(集合)的方法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user WHERE id IN(1,3,5,7,9,11,13,100);</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username  | password | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  1 | 张三      | zhangsan | user@qq.com | 1419811708 | user.jpg |     1 |   18 |</span><br><span class="line">|  3 | 章子怡    | zhangsan | user@qq.com | 1419813708 | user.jpg |     3 |   18 |</span><br><span class="line">|  5 | ring      | ring     | user@qq.com | 1419815708 | user.jpg |     2 |   18 |</span><br><span class="line">|  7 | sing      | sing     | user@qq.com | 1419817708 | user.jpg |     5 |   18 |</span><br><span class="line">|  9 | rose      | rose     | user@qq.com | 1419821708 | user.jpg |     2 |   18 |</span><br><span class="line">| 11 | john      | john     | user@qq.com | 1419841708 | user.jpg |     2 |   18 |</span><br><span class="line">+<span class="comment">----+-----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">6 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>模糊查询：  </p>
<ul>
<li>%:代表0个1个或多个任意字符</li>
<li>_:代表1个任意字符</li>
</ul>
<p>查询名字在包含<code>张</code>的用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user WHERE username LIKE '%张%';</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   18 |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   18 |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>查询用户名为三位的用户：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user WHERE username LIKE '___';</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   18 |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   18 |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>多条件查询 ：<br>查询用户名为<code>sing</code>且密码为<code>sing</code>的用户：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user WHERE username='sing' AND password='sing';</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username | password | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  7 | sing     | sing     | user@qq.com | 1419817708 | user.jpg |     5 |   18 |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="4、GROUP-BY查询结果分组"><a href="#4、GROUP-BY查询结果分组" class="headerlink" title="4、GROUP BY查询结果分组"></a>4、GROUP BY查询结果分组</h3><p>按照用户所属省份分组：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user GROUP BY proId;  </span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   18 |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   18 |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   18 |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |   18 |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |   18 |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 如果出现以下错误：</span><br><span class="line">mysql&gt; SELECT * FROM cms_user GROUP BY proId;</span><br><span class="line">ERROR 1055 (42000): Expression #1 of SELECT list is not in GROUP BY clause and contains nonaggregated column &apos;cms.cms_user.id&apos; which is not functionally dependent on columns in GROUP BY clause; this is incompatible with sql_mode=only_full_group_by</span><br><span class="line"># 此时只需输入以下命令即可：</span><br><span class="line">set @@GLOBAL.sql_mode=&apos;&apos;;</span><br><span class="line">set sql_mode =&apos;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&apos;;</span><br><span class="line"># 参考文章：http://www.cnblogs.com/jim2016/p/6322703.html</span><br></pre></td></tr></table></figure>
<p>由上面的查询结果可以看出，把我们查询的结果分为了5组，但是并不知道每组有多少数据，现在我们增加一个字段性别<code>sex</code>，并给各条数据赋值后按性别查询分组：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE cms_user ADD sex ENUM('男','女','保密');</span><br><span class="line">Query OK, 0 rows affected (0.08 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; UPDATE cms_user SET sex='男' WHERE id IN(1,3,5,7,9);</span><br><span class="line">Query OK, 5 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 5  Changed: 5  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; UPDATE cms_user SET sex='女' WHERE id IN(2,4,6,8,10);</span><br><span class="line">Query OK, 5 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 5  Changed: 5  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; UPDATE cms_user SET sex='保密' WHERE id IN(12,11);</span><br><span class="line">Query OK, 2 rows affected (0.00 sec)</span><br><span class="line">Rows matched: 2  Changed: 2  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM cms_user GROUP BY sex;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex    |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   18 | 男     |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   18 | 女     |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |   18 | 保密   |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>我们可以使用一下命令来实现多字段分组：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user GROUP BY sex,proId;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex    |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   18 | 男     |</span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |   18 | 男     |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   18 | 男     |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |   18 | 男     |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |   18 | 女     |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   18 | 女     |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |   18 | 女     |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |   18 | 女     |</span><br><span class="line">| 12 | test1     | test1        | user@qq.com | 1419811708 | user.jpg |     1 | NULL | 保密   |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |   18 | 保密   |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>此时首先会以<code>sex</code>分为三组，然后在每个组内按<code>proId</code>分组，但是我们怎么显示每个分组的数量？</p>
<h5 id="GROUP-CONCAT"><a href="#GROUP-CONCAT" class="headerlink" title="GROUP_CONCAT"></a>GROUP_CONCAT</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id,sex,GROUP_CONCAT(username) FROM cms_user GROUP BY sex;</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+</span></span><br><span class="line">| id | sex    | GROUP_CONCAT(username)          |</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+</span></span><br><span class="line">|  1 | 男     | 张三,章子怡,ring,sing,rose      |</span><br><span class="line">|  2 | 女     | 张三丰,long,queen,blek,lily     |</span><br><span class="line">| 11 | 保密   | john,test1                      |</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure>
<p>我们通过<code>GROUP_CONCAT</code>+字段名可以看到详细的用户名组；</p>
<h5 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h5><ul>
<li>COUNT() 不统计NULL值</li>
<li>MAX()</li>
<li>MIN()</li>
<li>AVG()</li>
<li>SUM()</li>
</ul>
<p>更新一下我们的年龄字段，然后使用这些函数测试</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">11</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">21</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">33</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">44</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">4</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">25</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">5</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">77</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">6</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">56</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">7</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">88</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">8</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">12</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">9</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">32</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> cms_user <span class="keyword">SET</span> age=<span class="number">65</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">11</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id,sex,GROUP_CONCAT(username),</span><br><span class="line">    -&gt; COUNT(*) AS totalUsers,</span><br><span class="line">    -&gt; MAX(age) AS max_age,</span><br><span class="line">    -&gt; MIN(age) AS min_age,</span><br><span class="line">    -&gt; AVG(age) AS avg_age,</span><br><span class="line">    -&gt; SUM(age) AS sum_age</span><br><span class="line">    -&gt; FROM cms_user</span><br><span class="line">    -&gt; GROUP BY sex;</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+------------+---------+---------+---------+---------+</span></span><br><span class="line">| id | sex    | GROUP_CONCAT(username)          | totalUsers | max_age | min_age | avg_age | sum_age |</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+------------+---------+---------+---------+---------+</span></span><br><span class="line">|  1 | 男     | 张三,章子怡,ring,sing,rose      |          5 |      56 |      11 | 27.4000 |     137 |</span><br><span class="line">|  2 | 女     | 张三丰,long,queen,blek,lily     |          5 |      88 |      21 | 52.4000 |     262 |</span><br><span class="line">| 11 | 保密   | john,test1                      |          2 |      65 |      65 | 65.0000 |      65 |</span><br><span class="line">+<span class="comment">----+--------+---------------------------------+------------+---------+---------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>先得我们得到分组的详情，然后我们配合使用<code>WITH ROLLUP</code>来进行筛选输出：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id,sex,</span><br><span class="line">    -&gt; COUNT(*) AS totalUsers,</span><br><span class="line">    -&gt; MAX(age) AS max_age,</span><br><span class="line">    -&gt; MIN(age) AS min_age,</span><br><span class="line">    -&gt; SUM(age) AS sum_age</span><br><span class="line">    -&gt; FROM cms_user</span><br><span class="line">    -&gt; GROUP BY sex WITH ROLLUP;</span><br><span class="line">+<span class="comment">----+--------+------------+---------+---------+---------+</span></span><br><span class="line">| id | sex    | totalUsers | max_age | min_age | sum_age |</span><br><span class="line">+<span class="comment">----+--------+------------+---------+---------+---------+</span></span><br><span class="line">|  1 | 男     |          5 |      56 |      11 |     137 |</span><br><span class="line">|  2 | 女     |          5 |      88 |      21 |     262 |</span><br><span class="line">| 11 | 保密   |          2 |      65 |      65 |      65 |</span><br><span class="line">| 11 | NULL   |         12 |      88 |      11 |     464 |</span><br><span class="line">+<span class="comment">----+--------+------------+---------+---------+---------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>我们可以看到最后一行，<code>id</code>为以上列表中最大的一条，<code>totalUsers</code>为以上列表中的总和，<code>max_age</code>为以上列表的最大值，<code>min_age</code>为以上列表的最小值，<code>sum_age</code>为以上列表的总和。</p>
<h3 id="5、HAVING子句"><a href="#5、HAVING子句" class="headerlink" title="5、HAVING子句"></a>5、HAVING子句</h3><p>通过HAVING子句对分组结果进行二次筛选(只能配合分组使用，否则无效)。<br>查询性别，用户名详情，组中总人数，最大年龄，年龄总和：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT sex,GROUP_CONCAT(username) AS users,</span><br><span class="line">    -&gt; COUNT(*) AS totalUsers,</span><br><span class="line">    -&gt; MAX(age) AS max_age,</span><br><span class="line">    -&gt; SUM(age) AS sum_age</span><br><span class="line">    -&gt; FROM cms_user </span><br><span class="line">    -&gt; GROUP BY sex;</span><br><span class="line">+<span class="comment">--------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">| sex    | users                           | totalUsers | max_age | sum_age |</span><br><span class="line">+<span class="comment">--------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">| 男     | 张三,章子怡,ring,sing,rose      |          5 |      56 |     137 |</span><br><span class="line">| 女     | 张三丰,long,queen,blek,lily     |          5 |      88 |     262 |</span><br><span class="line">| 保密   | john,test1                      |          2 |      65 |      65 |</span><br><span class="line">+<span class="comment">--------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>此时查询出三组，然后<code>保密</code>一组人数为<code>2</code>，我们用<code>HAVING</code>条件过滤掉<code>组中人数大于2</code>的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT sex,GROUP_CONCAT(username) AS users,</span><br><span class="line">    -&gt; COUNT(*) AS totalUsers,</span><br><span class="line">    -&gt; MAX(age) AS max_age,</span><br><span class="line">    -&gt; SUM(age) AS sum_age</span><br><span class="line">    -&gt; FROM cms_user </span><br><span class="line">    -&gt; GROUP BY sex</span><br><span class="line">    -&gt; HAVING COUNT(*)&gt;2;</span><br><span class="line">+<span class="comment">------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">| sex  | users                           | totalUsers | max_age | sum_age |</span><br><span class="line">+<span class="comment">------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">| 男   | 张三,章子怡,ring,sing,rose      |          5 |      56 |     137 |</span><br><span class="line">| 女   | 张三丰,long,queen,blek,lily     |          5 |      88 |     262 |</span><br><span class="line">+<span class="comment">------+---------------------------------+------------+---------+---------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>再查询一下，组中人数大于2，且最大年龄最大年龄小于60：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT sex,GROUP_CONCAT(username) AS users,</span><br><span class="line">    -&gt; COUNT(*) AS totalUsers,</span><br><span class="line">    -&gt; MAX(age) AS max_age,</span><br><span class="line">    -&gt; SUM(age) AS sum_age</span><br><span class="line">    -&gt; FROM cms_user </span><br><span class="line">    -&gt; GROUP BY sex</span><br><span class="line">    -&gt; HAVING COUNT(*)&gt;2 AND MAX(age)&gt;60;</span><br><span class="line">+<span class="comment">------+--------------------------------+------------+---------+---------+</span></span><br><span class="line">| sex  | users                          | totalUsers | max_age | sum_age |</span><br><span class="line">+<span class="comment">------+--------------------------------+------------+---------+---------+</span></span><br><span class="line">| 女   | 张三丰,long,queen,blek,lily    |          5 |      88 |     262 |</span><br><span class="line">+<span class="comment">------+--------------------------------+------------+---------+---------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="6、ORDER-BY-排序"><a href="#6、ORDER-BY-排序" class="headerlink" title="6、ORDER BY 排序"></a>6、ORDER BY 排序</h3><p>降序排列<code>DESC</code>，默认的是升序<code>ASC</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user ORDER BY id DESC;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex    |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| 12 | test1     | test1        | user@qq.com | 1419811708 | user.jpg |     1 | NULL | 保密   |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |   65 | 保密   |</span><br><span class="line">| 10 | lily      | lily         | user@qq.com | 1419831708 | user.jpg |     2 |   32 | 女     |</span><br><span class="line">|  9 | rose      | rose         | user@qq.com | 1419821708 | user.jpg |     2 |   12 | 男     |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |   88 | 女     |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |   56 | 男     |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |   77 | 女     |</span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |   25 | 男     |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |   44 | 女     |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   33 | 男     |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   21 | 女     |</span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   11 | 男     |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>又年龄升序，id降序：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user ORDER BY age ASC,id DESC;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex    |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| 12 | test1     | test1        | user@qq.com | 1419811708 | user.jpg |     1 | NULL | 保密   |</span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   11 | 男     |</span><br><span class="line">|  9 | rose      | rose         | user@qq.com | 1419821708 | user.jpg |     2 |   12 | 男     |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   21 | 女     |</span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |   25 | 男     |</span><br><span class="line">| 10 | lily      | lily         | user@qq.com | 1419831708 | user.jpg |     2 |   32 | 女     |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   33 | 男     |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |   44 | 女     |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |   56 | 男     |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |   65 | 保密   |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |   77 | 女     |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |   88 | 女     |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<p>实现随机提取记录：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  SELECT * FROM cms_user ORDER BY RAND();</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex    |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">|  5 | ring      | ring         | user@qq.com | 1419815708 | user.jpg |     2 |   25 | 男     |</span><br><span class="line">|  4 | long      | long         | user@qq.com | 1419814708 | user.jpg |     4 |   44 | 女     |</span><br><span class="line">|  6 | queen     | queen        | user@qq.com | 1419861708 | user.jpg |     3 |   77 | 女     |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   33 | 男     |</span><br><span class="line">| 12 | test1     | test1        | user@qq.com | 1419811708 | user.jpg |     1 | NULL | 保密   |</span><br><span class="line">| 11 | john      | john         | user@qq.com | 1419841708 | user.jpg |     2 |   65 | 保密   |</span><br><span class="line">|  9 | rose      | rose         | user@qq.com | 1419821708 | user.jpg |     2 |   12 | 男     |</span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   11 | 男     |</span><br><span class="line">| 10 | lily      | lily         | user@qq.com | 1419831708 | user.jpg |     2 |   32 | 女     |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   21 | 女     |</span><br><span class="line">|  7 | sing      | sing         | user@qq.com | 1419817708 | user.jpg |     5 |   56 | 男     |</span><br><span class="line">|  8 | blek      | blek         | user@qq.com | 1419818708 | user.jpg |     1 |   88 | 女     |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+--------+</span></span><br><span class="line">12 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h3 id="6、LIMIT限制查询结果显示条数"><a href="#6、LIMIT限制查询结果显示条数" class="headerlink" title="6、LIMIT限制查询结果显示条数"></a>6、LIMIT限制查询结果显示条数</h3><h4 id="1、LIMIT-显示条数-对于查询结果进行限制"><a href="#1、LIMIT-显示条数-对于查询结果进行限制" class="headerlink" title="1、LIMIT 显示条数(对于查询结果进行限制)"></a>1、LIMIT 显示条数(对于查询结果进行限制)</h4><p>查询表中前3条记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user LIMIT 3;</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">| id | username  | password     | email       | regTime    | face     | proId | age  | sex  |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">|  1 | 张三      | zhangsan     | user@qq.com | 1419811708 | user.jpg |     1 |   11 | 男   |</span><br><span class="line">|  2 | 张三丰    | zhangsanfeng | user@qq.com | 1419812708 | user.jpg |     2 |   21 | 女   |</span><br><span class="line">|  3 | 章子怡    | zhangsan     | user@qq.com | 1419813708 | user.jpg |     3 |   33 | 男   |</span><br><span class="line">+<span class="comment">----+-----------+--------------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br></pre></td></tr></table></figure>
<h4 id="2、LIMIT-偏移量，显示条数"><a href="#2、LIMIT-偏移量，显示条数" class="headerlink" title="2、LIMIT 偏移量，显示条数"></a>2、LIMIT 偏移量，显示条数</h4><p>通过该命令可以实现分页，偏移量从0开始，例如，去第五条开始的五条数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM cms_user LIMIT 5,5;</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">| id | username | password | email       | regTime    | face     | proId | age  | sex  |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">|  6 | queen    | queen    | user@qq.com | 1419861708 | user.jpg |     3 |   77 | 女   |</span><br><span class="line">|  7 | sing     | sing     | user@qq.com | 1419817708 | user.jpg |     5 |   56 | 男   |</span><br><span class="line">|  8 | blek     | blek     | user@qq.com | 1419818708 | user.jpg |     1 |   88 | 女   |</span><br><span class="line">|  9 | rose     | rose     | user@qq.com | 1419821708 | user.jpg |     2 |   12 | 男   |</span><br><span class="line">| 10 | lily     | lily     | user@qq.com | 1419831708 | user.jpg |     2 |   32 | 女   |</span><br><span class="line">+<span class="comment">----+----------+----------+-------------+------------+----------+-------+------+------+</span></span><br><span class="line">5 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>
<p>到此，查询语句基本完成。  </p>
<p>最后演示一下查询的全部条件语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>,sex,age,<span class="keyword">GROUP_CONCAT</span>(username),</span><br><span class="line"><span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> totalUsers,</span><br><span class="line"><span class="keyword">MAX</span>(age) <span class="keyword">AS</span> max_age,</span><br><span class="line"><span class="keyword">MIN</span>(age) <span class="keyword">AS</span> min_age,</span><br><span class="line"><span class="keyword">AVG</span>(age) <span class="keyword">AS</span> avg_age,</span><br><span class="line"><span class="keyword">SUM</span>(age) <span class="keyword">AS</span> sum_age</span><br><span class="line"><span class="keyword">FROM</span> cms_user</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">id</span>&gt;=<span class="number">1</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sex</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(*)&gt;=<span class="number">2</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span></span><br><span class="line"><span class="keyword">LIMIT</span> <span class="number">0</span>,<span class="number">2</span>;</span><br></pre></td></tr></table></figure></div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2017/09/12/viewpager_flex_title/">高仿新浪微博头部的导航条</a><a class="next" href="/2017/08/24/MySql-10_table_data_operation/">MySql_10 表中数据的增、删、改</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySql/">MySql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/教程/">教程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/03/19/Android_CountDownTimer/">CountDownTimer的使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/05/Android_decompile/">Android 反编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/01/Android_dialog_shadow/">Android 使用Dialog时状态栏变黑的问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/21/Python_Django_simple_server/">基于 Python 的简单服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/21/Android_about_image/">Android 图片相关操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/16/DesignPattern_01_Principle/">《设计模式》走向灵活软件之路--面向对象的六大原则</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/13/MySql-17_indexes/">MySql_17 MySQL中的索引</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/10/Android_Application_Analysis/">Application 全面解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/30/Android_Glide_Basice/">Glide基础入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/29/MySql-16_function_library/">MySql_16 MySQL中的数学函数库</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">Sing.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>